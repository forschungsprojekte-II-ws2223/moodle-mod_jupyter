define("mod_jupyter/submit_notebook",["exports","./repository","core/notification","core/templates"],(function(_exports,_repository,_notification,_templates){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};const context={message:"",closebutton:1,announce:1,points:[],error:!1},Selectors_elements={submitResponseBody:'[data-element="mod_jupyter/body-placeholder"]'},Selectors_actions={submitButton:'[data-action="mod_jupyter/submit-notebook_button"]',resetModal:'[data-action="mod_jupyter/reset-modal_button"]'};_exports.init=async _ref=>{let{user:user,courseid:courseid,instanceid:instanceid,filename:filename,token:token}=_ref;document.addEventListener("click",(e=>{e.target.closest(Selectors_actions.submitButton)&&(resetModalTable(),callSubmitNotebook(user,courseid,instanceid,filename,token))})),document.addEventListener("click",(e=>{e.target.closest(Selectors_actions.resetModal)&&resetModalTable()}))};const callSubmitNotebook=async(user,courseid,instanceid,filename,token)=>{const response=await(0,_repository.submitNotebook)(user,courseid,instanceid,filename,token);"error"in response[0]?(context.error=response[0].error,context.errortype=response[0].errortype):(context.error=!1,context.points=response),renderModalTable()},renderModalTable=()=>{_templates.default.renderForPromise("mod_jupyter/submit_response_modal_table",context).then((_ref2=>{let{html:html,js:js}=_ref2;_templates.default.replaceNodeContents(Selectors_elements.submitResponseBody,html,js)})).catch((error=>(0,_notification.exception)(error)))},resetModalTable=async()=>{_templates.default.renderForPromise("mod_jupyter/loading",context).then((_ref3=>{let{html:html,js:js}=_ref3;_templates.default.replaceNodeContents(Selectors_elements.submitResponseBody,html,js)})).catch((error=>(0,_notification.exception)(error)))}}));

//# sourceMappingURL=submit_notebook.min.js.map