{"version":3,"file":"submit_notebook.min.js","sources":["../src/submit_notebook.js"],"sourcesContent":["import { submitNotebook } from './repository';\nimport { exception as displayException } from 'core/notification';\nimport Templates from 'core/templates';\nimport { get_string as getString } from 'core/str';\n\nconst context = {\n    message: '',\n    closebutton: 1,\n    announce: 1\n};\n\nconst Selectors = {\n    elements: {\n        submitResponse: '[data-element=\"mod_jupyter/submit-response\"]'\n    },\n    actions: {\n        submitButton: '[data-action=\"mod_jupyter/submit-notebook_button\"]',\n    },\n};\n\nexport const init = async ({ user, contextid }) => {\n    getString('submitsuccessnotification', 'mod_jupyter')\n        .then(str => {\n            context.message = str;\n        })\n        .catch();\n\n    document.addEventListener('click', e => {\n        if (e.target.closest(Selectors.actions.submitButton)) {\n            callSubmitNotebook(user, contextid);\n\n            // This will call the function to load and render our template.\n            Templates.renderForPromise('core/notification_info', context)\n\n                // It returns a promise that needs to be resoved.\n                .then(({ html, js }) => {\n                    // Here eventually I have my compiled template, and any javascript that it generated.\n                    // The templates object has append, prepend and replace functions.\n                    Templates.appendNodeContents(Selectors.elements.submitResponse, html, js);\n                })\n                // Deal with this exception (Using core/notify exception function is recommended).\n                .catch((error) => displayException(error));\n        }\n    });\n};\n\nconst callSubmitNotebook = async (user, contextid) => {\n    const response = await submitNotebook(user, contextid);\n    window.console.log(response);\n    return response;\n};\n"],"names":["context","message","closebutton","announce","Selectors","submitResponse","submitButton","async","user","contextid","then","str","catch","document","addEventListener","e","target","closest","callSubmitNotebook","renderForPromise","_ref2","html","js","appendNodeContents","error","response","window","console","log"],"mappings":"uUAKMA,QAAU,CACZC,QAAS,GACTC,YAAa,EACbC,SAAU,GAGRC,mBACQ,CACNC,eAAgB,gDAFlBD,kBAIO,CACLE,aAAc,oEAIFC,MAAAA,WAAOC,KAAEA,KAAFC,UAAQA,oCACrB,4BAA6B,eAClCC,MAAKC,MACFX,QAAQC,QAAUU,OAErBC,QAELC,SAASC,iBAAiB,SAASC,IAC3BA,EAAEC,OAAOC,QAAQb,kBAAkBE,gBACnCY,mBAAmBV,KAAMC,8BAGfU,iBAAiB,yBAA0BnB,SAGhDU,MAAKU,YAACC,KAAEA,KAAFC,GAAQA,6BAGDC,mBAAmBnB,mBAAmBC,eAAgBgB,KAAMC,OAGzEV,OAAOY,QAAU,2BAAiBA,oBAK7CN,mBAAqBX,MAAOC,KAAMC,mBAC9BgB,eAAiB,8BAAejB,KAAMC,kBAC5CiB,OAAOC,QAAQC,IAAIH,UACZA"}